## Set the page title
#set( $page_title = "Queue View Page" )	

## load prototypes
#set( $h1 = "<script src='/js/prototype.js' type='text/javascript'></script>")
#set( $page_headers = [$h1] )

<ul class="tabs">
	<li><a href="/queue">Overview</a></li>
	<li><a href="?queue=org.paxle.crawler">Crawler</a></li>
	<li><a href="?queue=org.paxle.parser">Parser</a></li>
	<li><a href="?queue=org.paxle.indexer">Indexer</a></li>
</ul>

<script type="text/javascript">
      var ajaxPopulater = function (id,reload) {
         var url  = '/queue?#{if}($paramParser.getString("queue"))queue=${paramParser.getString("queue")}&#{end}reload=' + reload;
         new Ajax.PeriodicalUpdater(id, url, {
            method: 'post',
            frequency: 5,
            asynchronous: true,
            decay: 1
         });
      };
</script>
	  
#if($paramParser.getString("queue"))
   <script type="text/javascript">
      ajaxPopulater('infoBoxQueueLists','queueList');
   </script>	

   <div id="infoBoxQueueLists">
      #parse('/resources/templates/QueueViewLists.vm')
   </div>
#else
   <script type="text/javascript">
      ajaxPopulater('infoBoxQueueOverview','overview');
   </script>		
	
   <div id="infoBoxQueueOverview">
	  #parse('/resources/templates/QueueViewOverview.vm')
   </div>
#end