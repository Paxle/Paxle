## getting resourcebundle to translate site
#set( $text = $resourceTool.bundle('OSGI-INF/l10n/queueview'))

## Set the page title
#set( $page_title = ${text.browser.title} )	

## load prototypes
#set( $h1 = "<script src='/js/prototype.js' type='text/javascript'></script>")
#set( $page_headers = [$h1] )

<ul class="tabs">
	<li><a href="/queue" #if(!$paramParser.getString("queue"))class="active"#end>${text.tab.overview}</a></li>
	<li><a href="?queue=org.paxle.crawler" #if($paramParser.getString("queue","")=="org.paxle.crawler")class="active"#end>${text.tab.crawler}</a></li>
	<li><a href="?queue=org.paxle.parser" #if($paramParser.getString("queue","")=="org.paxle.parser") class="active"#end>${text.tab.parser}</a></li>
	<li><a href="?queue=org.paxle.indexer" #if($paramParser.getString("queue","")=="org.paxle.indexer") class="active"#end>${text.tab.indexer}</a></li>
</ul>

<script type="text/javascript">
			/*<![CDATA[*/
      var ajaxPopulater = function (id,reload) {
         var url  = '/queue?#{if}($paramParser.getString("queue"))queue=${paramParser.getString("queue")}&#{end}reload=' + reload;
         new Ajax.PeriodicalUpdater(id, url, {
            method: 'post',
            frequency: 5,
            asynchronous: true,
            decay: 1
         });
      };
			/*]]>*/
</script>
	  
#if($paramParser.getString("queue"))
   <script type="text/javascript">
      ajaxPopulater('infoBoxQueueLists','queueList');
   </script>	

   <div id="infoBoxQueueLists">
      #parse('/resources/templates/QueueViewLists.vm')
   </div>
#else
   <script type="text/javascript">
      ajaxPopulater('infoBoxQueueOverview','overview');
   </script>		
	
   <div id="infoBoxQueueOverview">
	  #parse('/resources/templates/QueueViewOverview.vm')
   </div>
#end
