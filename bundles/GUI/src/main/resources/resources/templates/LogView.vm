## Set the page title
#set( $page_title = "Log View" )

## the regular content
<h2>View Log</h2>
#set( $logReader = $manager.getService("org.osgi.service.log.LogReaderService"))
#if( $logReader)
<form>
  <select name="filterLogLevel">
    <option value="1">Error</option>
    <option value="2">Warning</option>
    <option value="3">Info</option>
    <option value="4">Debug</option>
  </select>
  <input type="submit" value="Filter LogLevel" />
</form>

<table width="100%">
  <tr>
    <th>Level</th>
    <th>Time</th>
    <th>Message</th>
  </tr>
#foreach( $logEntry in $logReader.getLog())
#set( $level = $logEntry.getLevel())
#if( $level <= $filterLogLevel)
  #set( $levelName = $logLevelName.get( $level))
  <tr>
    <td class="$levelName">$levelName</td>
    <td>$date.format("HH:mm:ss z - dd.MM.yy",$logEntry.getTime())</td>
    <td>$logEntry.getMessage()#if( $logEntry.getException()) <p class="exception">$logEntry.getException()</p> #end
    </td>
  </tr>
#end
#end
</table>
#else
<p class="box warning">No LogReaderService found</p>
#end
