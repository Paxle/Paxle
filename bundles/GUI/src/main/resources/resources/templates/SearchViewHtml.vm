## Set the page title
#set( $page_title = "Search Page" )
## Add custom html headers
#if( $searchQuery)
	#set( $h1 = "<link rel='alternate' type='application/rss+xml' title='Paxle Search Page' href='?format=rss&amp;query=$escTool.url($searchQuery)' />")
	## TODO: link to a opensearch-description
	## #set( $h2 = '<link rel="search" type="application/opensearchdescription+xml" title="Paxle Search" href="opensearchdescription.xml" />')
	#set( $page_headers = [$h1] )
#end
## the regular content
#if( $seBundeNotInstalled || !$fieldManager)
	<p class="error bundleNotInstalled">Search Engine Bundle not installed</p>
#else	
    #if( $searchResultList)	
    <script type="text/javascript" src="/js/wz_tooltip.js"></script>
    <a class="rssFeedLink" href="?format=rss&amp;query=$escTool.url($searchQuery)" title="Display results as RSS-feed">
		<img src="/images/feed.png" alt="RSS"/>
	</a>
    #end
    <form action="">
    	<p>
    		<input type="text" size="50" name="query" #if( $searchQuery) value="$searchQuery" #end/>
    		<input type="submit" value="Search"/>
    	</p>
    </form>
    <br />
	
	#if( $searchError)
	   <p class="error">$searchError</p>
	   
	#elseif( $searchResultList)
	   ## java script lib for the tooltips
	   ## See: SearchViewToolTip.vm

      <table>
	         #foreach($searchResult in $searchResultList)
	            #foreach($result in $searchResult.getResult())
	               #if($result.get($fieldManager.get("Location")))
	                  <tr>
	                     #set($location = $result.get($fieldManager.get("Location")))
						 #set($hintText = $escTool.javascript("#parse('/resources/templates/SearchViewToolTip.vm')"))
	                     <td>
	                           ## only display favicons if the corresponding bundle is installed
	                     	   #if($showFavicons)
	                              #set($imageSrc = $escTool.javascript($result.get($fieldManager.get("Location"))))
	                              <img class="favicon" src="/favicon?url=$escTool.url("$imageSrc")" width="16" height="16" alt="-"/>
	                     	   #end
	                           <a href="$result.get($fieldManager.get("Location"))">
	                           #if($result.get($fieldManager.get("Title")))
	                              $result.get($fieldManager.get("Title"))
	                           #else
	                              $result.get($fieldManager.get("Location"))
	                           #end</a>&nbsp;<img src="/images/bullet_arrow_up.png" onclick="Tip('$hintText',STICKY,true,DURATION,5000)" alt="action"/><br />
	                           #if($result.get($fieldManager.get("Author")))
	                              Author: $result.get($fieldManager.get("Author"))<br />
	                           #end
	                           #if($result.get($fieldManager.get("LastCrawled")))
	                              Last Crawled: $dateTool.format('short',$result.get($fieldManager.get("LastCrawled")))<br />
	                           #end
	                           #if($result.get($fieldManager.get("LastModified")))
	                              Last Modified: $dateTool.format('short',$result.get($fieldManager.get("LastModified")))<br />
	                           #end
	                           #if ($result.get($fieldManager.get("MimeType")))
	                              Content Type: $result.get($fieldManager.get("MimeType"))<br />
	                           #end
	                           #if($result.get($fieldManager.get("Summary")))
	                              Summary: $result.get($fieldManager.get("Summary"))<br />
	                           #end
	                           #if($result.get($fieldManager.get("Snippet")))
	                              Summary: $result.get($fieldManager.get("Snippet"))<br />
	                           #end
	                     </td>
	                  </tr>
	               #end
	            #end
	         #end
	   </table>
	#else
		<!-- search-footer -->
	#end
#end
