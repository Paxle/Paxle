## Set the page title
#set( $page_title = "Paxle Status Page" )
## Activate onLoad
#set ( $bodyonload = "fhide(null, null);" )

<ul>
	<li><a href="#general" onClick="switchTab('general'); return false;">General</a></li>
	
</ul>

## the regular content
<fieldset>
<legend>General</legend>
<form>
	<input type="submit" name="shutdown" value="Shutdown" />	
	<input type="submit" name="restart" value="Restart" />
</form>
</fieldset>

#set($subCrawlerManager = $manager.getService("org.paxle.crawler.ISubCrawlerManager"))
#if($subCrawlerManager)
<fieldset>
	<legend>Crawler:</legend>
	#set($crawlers = $manager.getServices("org.paxle.core.IMWComponent","(component.ID=org.paxle.crawler)"))
	#if ($crawlers)
		#foreach($crawler in $crawlers)
			The crawler is 
			#if($crawler.isPaused() == true)
				<b><font color="red">paused</font></b>
			#else 
				<b><font color="green">running</font></b>
			#end.
		#end
	#end


		
	$subCrawlerManager.getSubCrawlers().size() crawler(s) found, supporting following Protocols:<br />
	<ul>
		
		#foreach($subCrawler in $subCrawlerManager.getSubCrawlers())
				<li>$subCrawler.getProtocol()</li>
		#end
	</ul>
</fieldset>
#end

#set($subParserManager = $manager.getService("org.paxle.parser.ISubParserManager"))
#if($subParserManager)
<fieldset>
	<legend>Parser:</legend>
	#set($parsers = $manager.getServices("org.paxle.core.IMWComponent","(component.ID=org.paxle.crawler)"))	
	#if ($parsers)
		#foreach($parser in $parsers)
			The parser is 
			#if($parser.isPaused() == true)
				<b><font color="red">paused</font></b>
			#else 
				<b><font color="green">running</font></b>
			#end.
		#end
	#end

	<h3>Supported mimetypes:</h3>	
	#set($mimeTypes = $subParserManager.getMimeTypes())
	#set($parsers = $subParserManager.getSubParsers())		
	<b>$parsers.size()</b> parser(s) installed supporting <b>$mimeTypes.size()</b> mime-types.
	<ul>
		#foreach($mimeType in $mimeTypes)
		<li>$mimeType</li>
		#end
	</ul>
</fieldset>
#end	

	
#set($p2pManager = $manager.getService("org.paxle.p2p.IP2PManager"))
#if($p2pManager)
<fieldset>
	<legend>P2P-Manager:</legend>
	<table>
		<tr><td>Peer ID:</td><td>$p2pManager.getPeerID()</td></tr>
		<tr><td>Peer Name:</td><td>$p2pManager.getPeerName()</td></tr>
		<tr><td>Group ID:</td><td>$p2pManager.getGroupID()</td></tr>
		<tr><td>Group Name:</td><td>$p2pManager.getGroupName()</td></tr>			
	</table>
</fieldset>
<fieldset>
	<legend>Known Peers</legend>
	<ul>
	#set($peers = $p2pManager.getPeerList())
	#foreach($peer in $peers)		
		<li>$peer</li>
	#end
	</ul>
</fieldset>
#end

#set($se = $manager.getService("org.paxle.se.index.IIndexSearcher"))
#if($se)
<fieldset>
	<legend>Index</legend>
	<p>Known documents: $se.docCount</p>
</fieldset>
#end
